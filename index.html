<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <!-- Previous head content unchanged -->
</head>
<body class="antialiased">
    <!-- Previous HTML content unchanged until the script section -->

    <script>
        // Exercise Data with Verified Images and Video Links
        const exercises = {
            'barbell-bench-press': {
                name: 'ضغط البار المسطح',
                description: 'استلق على مقعد مسطح، امسك البار بعرض أكبر قليلاً من الكتفين، واضغط للأعلى حتى تمتد الذراعان. أنزل ببطء إلى الصدر.',
                muscles: 'الصدر، الترايسبس، الأكتاف',
                alternative: 'ضغط الدمبل',
                image: 'https://images.pexels.com/photos/7672110/pexels-photo-7672110.jpeg',
                video: 'https://www.youtube.com/watch?v=rT7DgCr-3pg'
            },
            'incline-dumbbell-press': {
                name: 'ضغط الدمبل المائل',
                description: 'استلق على مقعد مائل، امسك دمبل في كل يد عند مستوى الصدر، واضغط للأعلى حتى تمتد الذراعان. أنزل ببطء.',
                muscles: 'الصدر العلوي، الترايسبس، الأكتاف',
                alternative: 'تمارين الضغط المائلة',
                image: 'https://images.pexels.com/photos/6552687/pexels-photo-6552687.jpeg',
                video: 'https://www.youtube.com/watch?v=hChjZQhX1Ls'
            },
            'overhead-press': {
                name: 'ضغط فوق الرأس',
                description: 'قف ممسكًا بالبار عند مستوى الكتف، اضغط للأعلى حتى تمتد الذراعان، ثم أنزل ببطء.',
                muscles: 'الأكتاف، الترايسبس',
                alternative: 'ضغط الدمبل للكتف',
                image: 'https://images.pexels.com/photos/1552242/pexels-photo-1552242.jpeg',
                video: 'https://www.youtube.com/watch?v=qEwKCR5JCog'
            },
            'tricep-dips': {
                name: 'انحناء الترايسبس',
                description: 'استخدم قضيبين متوازيين، انخفض حتى تصبح الذراعان بزاوية 90 درجة، ثم ادفع للأعلى.',
                muscles: 'الترايسبس، الصدر، الأكتاف',
                alternative: 'ضغط الترايسبس بالكابل',
                image: 'https://images.pexels.com/photos/6550308/pexels-photo-6550308.jpeg',
                video: 'https://www.youtube.com/watch?v=2z8JmcrW-As'
            },
            'lateral-raises': {
                name: 'رفع الدمبل الجانبي',
                description: 'قف مع دمبل على الجانبين، ارفع إلى ارتفاع الكتف مع ثني خفيف في المرفقين، ثم أنزل.',
                muscles: 'الأكتاف',
                alternative: 'رفع بشريط المقاومة',
                image: 'https://images.pexels.com/photos/6552688/pexels-photo-6552688.jpeg',
                video: 'https://www.youtube.com/watch?v=3VcKaXpzqRo'
            },
            'pull-ups': {
                name: 'سحب على البار',
                description: 'تعلق على البار، اسحب جسمك حتى تصبح الذقن فوق البار، أنزل ببطء.',
                muscles: 'اللاتس، البايسبس، الرومبويد',
                alternative: 'جر الكابل',
                image: 'https://images.pexels.com/photos/6550306/pexels-photo-6550306.jpeg',
                video: 'https://www.youtube.com/watch?v=eGo4IYlbE5g'
            },
            'bent-over-barbell-row': {
                name: 'تجديف البار المنحني',
                description: 'انحن عند الوركين، اسحب البار نحو الأضلاع السفلية، مع ضغط لوحي الكتف.',
                muscles: 'اللاتس، الرومبويد، البايسبس',
                alternative: 'تجديف الدمبل بذراع واحدة',
                image: 'https://images.pexels.com/photos/6552689/pexels-photo-6552689.jpeg',
                video: 'https://www.youtube.com/watch?v=roCP6wCXPqo'
            },
            'deadlifts': {
                name: 'رفع الأثقال',
                description: 'قف مع البار على الأرض، ارفع بتمديد الوركين والركبتين، ثم أنزل ببطء.',
                muscles: 'الظهر السفلي، الأرداف، أوتار الركبة',
                alternative: 'رفع الأثقال الروماني بالدمبل',
                image: 'https://images.pexels.com/photos/416809/pexels-photo-416809.jpeg',
                video: 'https://www.youtube.com/watch?v=r4MzxtBKyNE'
            },
            'barbell-curls': {
                name: 'ثني البار',
                description: 'قف ممسكًا بالبار، اثنِ نحو الصدر، مع إبقاء المرفقين قريبين من الجسم.',
                muscles: 'البايسبس',
                alternative: 'ثني الدمبل المطرقي',
                image: 'https://images.pexels.com/photos/7672108/pexels-photo-7672108.jpeg',
                video: 'https://www.youtube.com/watch?v=kwG2ipFRgfo'
            },
            'face-pulls': {
                name: 'شد الوجه',
                description: 'استخدم آلة الكابل مع حبل، اسحب نحو الوجه مع التركيز على الدلتويد الخلفي.',
                muscles: 'الدلتويد الخلفي، الترابيس',
                alternative: 'طيران الدلتويد الخلفي',
                image: 'https://images.pexels.com/photos/6550307/pexels-photo-6550307.jpeg',
                video: 'https://www.youtube.com/shorts/7tgx6QHB0-A'
            },
            'barbell-squats': {
                name: 'قرفصاء بالأثقال',
                description: 'قف مع البار على الكتفين، انخفض حتى تصبح الفخذان موازية للأرض، ثم ادفع للأعلى.',
                muscles: 'الفخذ الأمامي، الأرداف، أوتار الركبة',
                alternative: 'قرفصاء بالكأس',
                image: 'https://images.pexels.com/photos/7672109/pexels-photo-7672109.jpeg',
                video: 'https://www.youtube.com/watch?v=ultWZbUMPL8'
            },
            'romanian-deadlifts': {
                name: 'رفع الأثقال الروماني',
                description: 'امسك البار، انحن عند الوركين مع إبقاء الساقين مستقيمة تقريبًا، ثم ارجع للأعلى.',
                muscles: 'أوتار الركبة، الأرداف',
                alternative: 'آلة ثني الأرجل',
                image: 'https://images.pexels.com/photos/416757/pexels-photo-416757.jpeg',
                video: 'https://www.youtube.com/watch?v=7j-2w4-P14I'
            },
            'leg-press': {
                name: 'ضغط الأرجل',
                description: 'اجلس على آلة ضغط الأرجل، ادفع المنصة للأعلى حتى تمتد الساقان، ثم أنزل ببطء.',
                muscles: 'الفخذ الأمامي، الأرداف',
                alternative: 'قرفصاء بلغاري منفصل',
                image: 'https://images.pexels.com/photos/416759/pexels-photo-416759.jpeg',
                video: 'https://www.youtube.com/watch?v=IZxyjW7MPJQ'
            },
            'calf-raises': {
                name: 'رفع الساق',
                description: 'قف على آلة أو درجة، ارفع الكعبين عاليًا، ثم أنزل ببطء.',
                muscles: 'الساق',
                alternative: 'رفع الساق الجالس',
                image: 'https://images.pexels.com/photos/6550309/pexels-photo-6550309.jpeg',
                video: 'https://www.youtube.com/watch?v=c5Kv6-fnTj8'
            },
            'walking-lunges': {
                name: 'انحناء المشي',
                description: 'اخطُ للأمام، انخفض حتى تصبح الركبة الأمامية بزاوية 90 درجة، ثم كرر بالساق الأخرى.',
                muscles: 'الفخذ الأمامي، الأرداف',
                alternative: 'صعود الدرج',
                image: 'https://images.pexels.com/photos/416760/pexels-photo-416760.jpeg',
                video: 'https://www.youtube.com/watch?v=L8fvypPrzzs'
            }
        };

        // Hamburger Menu
        const hamburger = document.querySelector('.hamburger-menu');
        const navLinks = document.querySelector('.navbar-links');
        hamburger.addEventListener('click', () => {
            navLinks.classList.toggle('active');
        });

        // Modal Handling
        const modal = document.getElementById('exerciseModal');
        const closeModalBtn = document.getElementById('closeModal');
        const exerciseButtons = document.querySelectorAll('[data-modal-target="exerciseModal"]');
        const videoIframe = document.getElementById('exerciseVideo');
        const videoFallback = document.getElementById('exerciseVideoFallback');

        exerciseButtons.forEach(button => {
            button.addEventListener('click', () => {
                const exerciseId = button.getAttribute('data-exercise');
                console.log('Opening modal for:', exerciseId); // Debug log
                const exercise = exercises[exerciseId];
                if (exercise) {
                    document.getElementById('exerciseName').textContent = exercise.name;
                    document.getElementById('exerciseDescription').textContent = 'الوصف: ' + exercise.description;
                    document.getElementById('exerciseMuscles').textContent = 'العضلات: ' + exercise.muscles;
                    document.getElementById('exerciseAlternative').textContent = 'البديل: ' + exercise.alternative;
                    const exerciseImage = document.getElementById('exerciseImage');
                    exerciseImage.src = exercise.image;
                    exerciseImage.loading = 'lazy'; // Optimize image loading

                    // Embed YouTube video
                    const videoId = exercise.video.includes('youtube.com') ? exercise.video.split('v=')[1]?.split('&')[0] : null;
                    if (videoId) {
                        videoIframe.src = `https://www.youtube.com/embed/${videoId}`;
                        videoIframe.classList.remove('hidden');
                        videoFallback.classList.add('hidden');
                        videoIframe.onerror = () => {
                            videoIframe.classList.add('hidden');
                            videoFallback.classList.remove('hidden');
                            document.getElementById('exerciseVideoLink').href = exercise.video;
                        };
                    } else {
                        videoIframe.classList.add('hidden');
                        videoFallback.classList.remove('hidden');
                        document.getElementById('exerciseVideoLink').href = exercise.video;
                    }

                    modal.classList.remove('hidden');
                } else {
                    console.error('Exercise not found:', exerciseId); // Debug log
                }
            });
        });

        closeModalBtn.addEventListener('click', () => {
            modal.classList.add('hidden');
            videoIframe.src = ''; // Stop video
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.classList.add('hidden');
                videoIframe.src = ''; // Stop video
            }
        });

        // Progress Tracker
        const progressForm = document.getElementById('progressForm');
        const progressTable = document.getElementById('progressTable');
        const progressCards = document.getElementById('progressCards');
        let progressData = JSON.parse(localStorage.getItem('progressData')) || [];

        function renderProgress() {
            // Desktop Table
            progressTable.innerHTML = '';
            progressData.forEach((entry, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="p-2 sm:p-3">${entry.exercise}</td>
                    <td class="p-2 sm:p-3">${entry.week}</td>
                    <td class="p-2 sm:p-3">${entry.weight}</td>
                    <td class="p-2 sm:p-3">${entry.reps}</td>
                    <td class="p-2 sm:p-3"><button class="bg-red-600 text-white py-1 px-2 rounded hover:bg-red-700 text-sm" onclick="deleteEntry(${index})">حذف</button></td>
                `;
                progressTable.appendChild(row);
            });

            // Mobile Cards
            progressCards.innerHTML = '';
            progressData.forEach((entry, index) => {
                const card = document.createElement('div');
                card.className = 'bg-gray-700 p-4 rounded-lg';
                card.innerHTML = `
                    <p class="text-sm"><strong>التمرين:</strong> ${entry.exercise}</p>
                    <p class="text-sm"><strong>الأسبوع:</strong> ${entry.week}</p>
                    <p class="text-sm"><strong>الوزن:</strong> ${entry.weight} كجم</p>
                    <p class="text-sm"><strong>التكرارات:</strong> ${entry.reps}</p>
                    <button class="bg-red-600 text-white py-1 px-2 rounded hover:bg-red-700 text-sm mt-2" onclick="deleteEntry(${index})">حذف</button>
                `;
                progressCards.appendChild(card);
            });
        }

        progressForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const exercise = document.getElementById('exerciseSelect').value;
            const week = document.getElementById('weekInput').value;
            const weight = document.getElementById('weightInput').value;
            const reps = document.getElementById('repsInput').value;
            if (exercise && week && weight && reps) {
                progressData.push({ exercise: exercises[exercise].name, week, weight, reps });
                localStorage.setItem('progressData', JSON.stringify(progressData));
                renderProgress();
                progressForm.reset();
            } else {
                alert('يرجى ملء جميع الحقول.');
            }
        });

        window.deleteEntry = function(index) {
            progressData.splice(index, 1);
            localStorage.setItem('progressData', JSON.stringify(progressData));
            renderProgress();
        };

        // Initial Render
        renderProgress();

        // Smooth Scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                e.preventDefault();
                document.querySelector(anchor.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
